@model List<WILLNPO_Diya_.Models.Event>

@{
    ViewData["Title"] = "Events";
}
@* carsol *@


<div id="carouselExampleCaptions" class="carousel slide carousel-fade">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="~/resources/eventc3.jpg" height="800px" class="d-block w-100" style="border-radius: 0">
            <div class="carousel-caption d-none d-md-block">
                <h1>
                    Welcome to the Mount Edgecombe community and estates
                    association npo
                </h1>
               @*  <p></p> *@
            </div>
        </div>
        <div class="carousel-item">
            <img src="~/resources/event_c1.jpg" height="800px" class="d-block w-100" style="border-radius: 0">
            <div class="carousel-caption d-none d-md-block">
                <h5>Team work makes the dream work </h5>
                <p>Our dedicated team </p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="~/resources/event_c2.jpg" height="800px" class="d-block w-100" style="border-radius: 0">
            <div class="carousel-caption d-none d-md-block">
                <h5>Awards Day</h5>
                <p>Awards day , for our annuel team building day .</p>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
    </button>
    </div>

<style>
        /* Carousel Wrapper */
        /* Carousel Wrapper */
        #carouselExampleCaptions {
        background-color: #9DC5BB;
        max-width: 100%; /* Makes carousel fit full width of the container */
            margin: 0 auto; /* Centers carousel */
            border-radius: 0px; /* Removes any rounding */
            margin-top: -16px; /* Adjusts top margin */
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); /* Refined shadow */
        }

        /* Carousel Image */
        .carousel-item img {
            height: 600px; /* Keeps a balanced height */
            object-fit: cover; /* Ensures images are contained neatly */
        }

        /* Caption Styling */
        .carousel-caption {
            background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent dark background */
            padding: 10px 20px;
            max-width: 75%; /* Centers captions and keeps them more compact */
            margin: 0 auto; /* Center aligns captions */
        }

            .carousel-caption h1, .carousel-caption h5 {
                font-size: 1.5em; /* Keeps headings balanced */
                font-weight: 600;
                font-family:Century;
                color: #ffffff;
            }

            .carousel-caption p {
                font-family:'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
                font-size: 0.9em; /* Keeps paragraph text subtle */
                color: #f0f0f0;
            }

        /* Carousel Controls */
        .carousel-control-prev-icon,
        .carousel-control-next-icon {
            background-color: rgba(0, 0, 0, 0.3); /* Adds a subtle background to controls */
            border-radius: 50%;
            padding: 10px;
        }

    <style >
    /* Header Section above Events Container */
    .page-header {
        text-align: center;
        width: 100%;
        padding: 2rem 0;
        background-color: #C6C8EE;
        max-width: 1550px;
        margin: 0 auto;
    }

    /* Title Styling */
    .page-title {
        text-align: center;
        font-size: 3rem;
        color: #2D3748;
        font-weight: 700;
       font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
        letter-spacing: 1px;
        text-transform: uppercase;
        padding: 1rem 0;
        margin: 0;
        text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Events container */
    .events-container {
        background-color: #C6C8EE;
        max-width: 1550px;
        margin: 0 auto;
        padding: 2rem;
    }

    /* Events grid */
    .events-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 2rem;
    }

    /* Wrapper for continuous background */
    .events-wrapper {
        padding: 2rem;
        background-color: #C6C8EE;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    /* Rest of your existing styles remain the same */
    .event-card {
        background-color: #FFFFFF;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        overflow: hidden;
        display: flex;
        flex-direction: column;
    }

        .event-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 36px rgba(0, 0, 0, 0.12);
        }

    .event-image {
        width: 100%;
        height: 230px;
        object-fit: cover;
        transition: transform 0.5s ease-in-out;
    }

    .event-card:hover .event-image {
        transform: scale(1.05);
    }

    .event-content {
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        flex-grow: 1;
    }

    .event-title {
        font-size: 1.9rem;
        color: #2D3748;
        font-weight: 700;
        margin-bottom: 1rem;
        text-transform: capitalize;
        line-height: 1.3;
    }

    .event-description {
        color: #4A5568;
        font-size: 1rem;
        margin-bottom: 1.5rem;
        display: -webkit-box;
        -webkit-line-clamp: 4;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .event-details {
        color: #718096;
        font-size: 0.95rem;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .detail-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
    }

    .detail-icon {
        width: 18px;
        height: 18px;
        opacity: 0.8;
        color: #2D3748;
    }
</style>

<div class="events-wrapper">
    <!-- Title and events now share the same container -->
    <div class="page-header">
        <h1 class="page-title">Upcoming Events</h1>
    </div>

    <div class="events-container">
        <div class="events-grid">
                @if (Model != null && Model.Any())
                {
                    foreach (var evt in Model)
                    {
                    <div class="event-card">
                            @if (!string.IsNullOrEmpty(evt.imageUrl))
                            {
                            <img src="@evt.imageUrl" alt="@evt.name" class="event-image" onerror="this.src='/images/default-event.jpg'">
                            }
                            else
                            {
                            <img src="https://images.pexels.com/photos/51947/tuscany-grape-field-nature-51947.jpeg" alt="Default event image" class="event-image">
                            }
                        <div class="event-content">
                            <h2 class="event-title">@evt.name</h2>
                            <p class="event-description">@evt.description</p>
                            <div class="event-details">
                                <div class="detail-item">
                                    <svg class="detail-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                    <span>@evt.dateTime</span>
                                </div>
                                <div class="detail-item">
                                    <svg class="detail-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                                    </svg>
                                    <span>@evt.location</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    }
                }
               
                else
                {
                <div class="no-events">No events available at the moment.</div>
                }
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.addEventListener('visibilitychange', () => {
            if (document.visibilityState === 'visible') {
                const eventImages = document.querySelectorAll('.event-image');
                eventImages.forEach(img => {
                    img.src = img.src; // Reload images
                });
            }
        });
    });
</script>
